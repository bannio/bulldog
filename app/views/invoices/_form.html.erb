<%= form_for @invoice do |f| %>
  <%= f.hidden_field :account_id %>
  <%= form_group_for f, :date, label: false do %>
    <%= f.text_field :date, class: "date_picker invoice-date-picker" %>
  <% end %>
  <% if params[:action] == 'new' %>
    <%= form_group_for f, :customer_id, label: false do%>
    <div class="customer-select">
      <%= f.collection_select :customer_id, @customers, :id, :name%>
    <% end %>
    </div>
  <% else %>
    <div class="input-group">
      <p><%= @invoice.customer_name %></p>
    </div>
  <% end %>

  <%= form_group_for f, :comment, label: false do %>
    <%= f.text_area :comment %>
  <% end %>
  
  <div class="table-responsive">
    <table class="table table-condensed" id="bill_table">
      <thead>
        <tr>
          <th class="first-col">Date</th>
          <th>Supplier</th>
          <th>Category</th>
          <th>Description</th>
          <th class="align-right">Amount</th>
          <% if params[:action] == 'edit' %>
          <th>Remove?</th>
          <% end %>
        </tr>
      </thead>
      <tbody>
      <% @invoice.bills.each do |bill| %>
        <%= render 'bill_fields', f: bill %>
      <% end %>
      </tbody>
      <tfoot>
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td class="title-td">Total </td>
          <td class="align-right"><%= number_to_currency(@invoice.total) %></td>
        </tr>
      </tfoot>
    </table>
  </div>
  <% case params[:action] %>
    <% when 'edit' %>
      <%= f.submit 'Update Invoice', class: 'create-btn std-btn' %>
      <%= link_to 'Destroy', @invoice, method: :delete, data: { confirm: 'Are you sure?' }, class: 'warn-btn std-btn' %>
    <% when 'new' %>
      <%= f.submit 'Create Invoice', class: 'create-btn std-btn' %>
    <% when 'create' %>
      <%= f.submit 'Create Invoice', class: 'create-btn std-btn' %>
    <% when 'show' %>
      <%=  link_to 'Edit', edit_invoice_path(@invoice), class: 'create-btn std-btn' %>
  <% end %>
  <%= link_to params[:action] == 'show' ? "Back" : "Cancel", invoices_path, class: 'action-btn std-btn' %>  

<% end %>